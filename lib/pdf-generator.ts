interface PDFData {
  orderId: string
  userName: string
  userEmail: string
  items: Array<{
    seat_id: string
    price: number
    zoneName?: string
    rowNumber?: number
    seatNumber?: number
  }>
  totalAmount: number
}

export async function generatePDF(data: PDFData): Promise<Buffer> {
  // Enhanced PDF content with better formatting
  const eventDate = new Date("2024-07-15T19:00:00").toLocaleString("ru-RU")

  let ticketsContent = ""
  data.items.forEach((item, index) => {
    ticketsContent += `
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            ğŸ« Ğ‘Ğ˜Ğ›Ğ•Ğ¢ â„–${index + 1}
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    ĞšĞĞĞ¦Ğ•Ğ Ğ¢ "Ğ—Ğ’Ğ•Ğ—Ğ”Ğ« Ğ­Ğ¡Ğ¢Ğ ĞĞ”Ğ«"
    
    Ğ”Ğ°Ñ‚Ğ° Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ: ${eventDate}
    ĞœĞµÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ: Ğ”Ğ²Ğ¾Ñ€ĞµÑ† Ğ¡Ğ¿Ğ¾Ñ€Ñ‚Ğ° "ĞÑ€ĞµĞ½Ğ°"
    
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ĞœĞ•Ğ¡Ğ¢Ğ:
    Ğ—Ğ¾Ğ½Ğ°: ${item.zoneName || "N/A"}
    Ğ ÑĞ´: ${item.rowNumber || "N/A"}
    ĞœĞµÑÑ‚Ğ¾: ${item.seatNumber || "N/A"}
    Ğ¦ĞµĞ½Ğ°: ${item.price.toLocaleString("ru-RU")} â‚½
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    ĞŸĞ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ: ${data.userName}
    Email: ${data.userEmail}
    Ğ—Ğ°ĞºĞ°Ğ·: ${data.orderId}
    
    [QR-ĞšĞĞ”: ${data.orderId}-${item.seat_id}]
    
    âš ï¸  Ğ’ĞĞ–ĞĞ:
    â€¢ ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ Ğ·Ğ° 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°
    â€¢ Ğ‘Ğ¸Ğ»ĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ĞµĞ½ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼
    â€¢ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ±Ğ¸Ğ»ĞµÑ‚ Ğ´Ğ¾ Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    `
  })

  const pdfContent = `
    TicketBooking - Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ¸Ğ»ĞµÑ‚Ñ‹
    
    Ğ—Ğ°ĞºĞ°Ğ· ÑĞ¾Ğ·Ğ´Ğ°Ğ½: ${new Date().toLocaleString("ru-RU")}
    ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°: ${data.totalAmount.toLocaleString("ru-RU")} â‚½
    ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ±Ğ¸Ğ»ĞµÑ‚Ğ¾Ğ²: ${data.items.length}
    
    ${ticketsContent}
    
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°: support@ticketbooking.ru
    Ğ¡Ğ°Ğ¹Ñ‚: https://ticketbooking.ru
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  `

  // Convert to buffer
  return Buffer.from(pdfContent, "utf-8")
}

// Function to generate QR code data
export function generateQRData(orderId: string, seatId: string): string {
  return JSON.stringify({
    orderId,
    seatId,
    timestamp: Date.now(),
    venue: 'Ğ”Ğ²Ğ¾Ñ€ĞµÑ† Ğ¡Ğ¿Ğ¾Ñ€Ñ‚Ğ° "ĞÑ€ĞµĞ½Ğ°"',
    event: 'ĞšĞ¾Ğ½Ñ†ĞµÑ€Ñ‚ "Ğ—Ğ²ĞµĞ·Ğ´Ñ‹ Ğ­ÑÑ‚Ñ€Ğ°Ğ´Ñ‹"',
  })
}
